<div class="curriculum-plan-editor"
     data-planid="{{plan.id}}"
     data-readonly="{{readonly}}">

    <h2 class="mb-3">
        {{plan.name}}
        {{#readonly}}
            <span class="badge bg-secondary">
                {{#str}} readonly, local_curriculum {{/str}}
            </span>
        {{/readonly}}
    </h2>

    <ul class="areas-container list-group list-group-flush" id="areas-sortable">
        {{#areas}}
        <li class="area-card card"
             data-areaid="{{id}}"
             data-sortorder="{{sortorder}}"
             data-virtual="{{is_virtual}}">

            <div class="card-header">

                <div class="d-flex align-items-center gap-2 justify-content-between">
                    <span>
                    <strong>{{name}}</strong>
                    </span>
                    {{^readonly}}
                    {{^is_virtual}}
                    {{#id}}
                    <div class="area-actions">
                        <a href="{{editurl}}" class="edit-area" data-areaid="{{id}}">âœï¸</a>
                        <a href="#" class="delete-area" data-areaid="{{id}}">ğŸ—‘ï¸</a>
                        <div class="area-order-controls btn-group btn-group-sm">
                        <button type="button"
                                class="btn btn-outline-secondary move-area-up"
                                aria-label="{{#str}} moveup {{/str}}">
                            â†‘
                        </button>
                        <button type="button"
                                class="btn btn-outline-secondary move-area-down"
                                aria-label="{{#str}} movedown {{/str}}">
                            â†“
                        </button>
                    </div>
                    </div>
                    {{/id}}
                    {{/is_virtual}}
                    {{/readonly}}
                </div>
            </div>

            <ul class="list-group list-group-flush subjects"
                data-areaid="{{id}}">

                {{#subjects}}
                <li class="list-group-item subject-item d-flex justify-content-between align-items-center"
                    data-subjectid="{{id}}"
                    data-sortorder="{{sortorder}}">

                    <span class="d-flex align-items-center gap-2">
                        {{name}}
                        <small class="text-muted">
                            ({{ihs}} hora(s) semanales)
                        </small>
                    </span>

                    {{^readonly}}
                    <span class="subject-actions">
                        <a href="{{editurl}}" class="edit-subject" data-subjectid="{{id}}">âœï¸</a>
                        <a href="#" class="delete-subject" data-subjectid="{{id}}">ğŸ—‘ï¸</a>
                        <div class="subject-order-controls btn-group btn-group-sm">
                        <button type="button"
                                class="btn btn-outline-secondary move-subject-up"
                                aria-label="{{#str}} moveup {{/str}}">
                            â†‘
                        </button>
                        <button type="button"
                                class="btn btn-outline-secondary move-subject-down"
                                aria-label="{{#str}} movedown {{/str}}">
                            â†“
                        </button>
                    </div>
                    </span>
                    {{/readonly}}
                </li>
                {{/subjects}}

                {{^subjects}}
                <li class="list-group-item text-muted">
                    {{#str}} nosubjects, local_curriculum {{/str}}
                </li>
                {{/subjects}}

            </ul>
        </li>
        {{/areas}}

    </ul>

    {{^readonly}}
    <div class="mt-4">
        <button class="btn btn-primary" id="save-structure">
            {{#str}} savestructure, local_curriculum {{/str}}
        </button>
    </div>
    {{/readonly}}

    {{#js}}
        require(['local_curriculum/plan_editor'], function(editor) {
            editor.init({
                planid: {{plan.id}},
                readonly: {{readonly}}
            });
        });
    {{/js}}

</div>
